
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
  
    <title>Quick Start &mdash; pySLGR 1 documentation</title>
  <!-- htmltitle is before nature.css - we use this hack to load bootstrap first -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="_static/css/bootstrap.min.css" media="screen" />
  <link rel="stylesheet" href="_static/css/bootstrap-responsive.css"/>

    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pySLGR 1 documentation" href="index.html" />
    <link rel="up" title="1. User Guide" href="user_guide.html" />
    <link rel="next" title="1.3. MFCC Features" href="MFCC_Features.html" />
    <link rel="prev" title="1.1. Install" href="install.html" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="_static/js/bootstrap.min.js" type="text/javascript"></script>

  <script type="text/javascript">
    $("div.buttonNext, div.buttonPrevious").hover(
       function () {
           $(this).css('background-color', '#FF9C34');
       },
       function () {
           $(this).css('background-color', '#A7D6E2');
       }
    );
    function showMenu() {
      var topNav = document.getElementById("scikit-navbar");
      if (topNav.className === "navbar") {
          topNav.className += " responsive";
      } else {
          topNav.className = "navbar";
      }
    };
  </script>

  </head>
  <body role="document">

<div class="header-wrapper">
    <div class="header"><div class="navbar" id="scikit-navbar">
            <ul>
                <li><a href="index.html">Home</a></li>
              <li><a href="user_guide.html">User Guide</a></li>
   
            <li><a href="examples.html">Examples</a></li>
			<li><a href="search.html">Search</a></li>
            </ul>
            <a href="javascript:void(0);" onclick="showMenu()">
                <div class="nav-icon">
                    <div class="hamburger-line"></div>
                    <div class="hamburger-line"></div>
                    <div class="hamburger-line"></div>
                </div>
            </a>
            
        </div> <!-- end navbar --></div>
</div>


<div class="content-wrapper">
    <div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
        <div class="rel">
    

  <!-- rellinks[1:] is an ugly hack to avoid link to module
  index -->
        <div class="rellink">
        <a href="install.html"
        accesskey="P">Previous
        <br/>
        <span class="smallrellink">
        1.1. Install
        </span>
            <span class="hiddenrellink">
            1.1. Install
            </span>
        </a>
        </div>
            <div class="spacer">
            &nbsp;
            </div>
        <div class="rellink">
        <a href="MFCC_Features.html"
        accesskey="N">Next
        <br/>
        <span class="smallrellink">
        1.3. MFCC Fea...
        </span>
            <span class="hiddenrellink">
            1.3. MFCC Features
            </span>
        </a>
        </div>
            <div class="spacer">
            &nbsp;
            </div>
        <div class="rellink">
        <a href="py-modindex.html"
        >Modules
        <br/>
        <span class="smallrellink">
        Python Module...
        </span>
            <span class="hiddenrellink">
            Python Module Index
            </span>
        </a>
        </div>

    <!-- Ad a link to the 'up' page -->
        <div class="spacer">
        &nbsp;
        </div>
        <div class="rellink">
        <a href="user_guide.html">
        Up
        <br/>
        <span class="smallrellink">
        1. User Guide
        </span>
            <span class="hiddenrellink">
            1. User Guide
            </span>
            
        </a>
        </div>
    </div>
    
      <p class="doc-version">This documentation is for pySLGR <strong>version 1</strong> &mdash; <!--- <a href="http://scikit-learn.org/stable/support.html#documentation-resources">Other versions</a></p> --->
	<!---
    <p class="citing">If you use the software, please consider <a href="about.html#citing-scikit-learn">citing scikit-learn</a>.</p>
    --->
	<ul>
<li><a class="reference internal" href="#">1.2. Quick Start</a><ul>
<li><a class="reference internal" href="#example-signal">1.2.1. example_signal</a></li>
<li><a class="reference internal" href="#example-mfcc">1.2.2. example_mfcc</a></li>
<li><a class="reference internal" href="#example-lid-gmm">1.2.3. example_lid_gmm</a></li>
</ul>
</li>
</ul>

    </div>
</div>

<input type="checkbox" id="nav-trigger" class="nav-trigger" checked />
<label for="nav-trigger"></label>




      <div class="content">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="quick-start">
<h1>1.2. Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h1>
<p>Examples come with the pyslgr installation. If you used the Anaconda install option, you will find the example script in the following directory:</p>
<p>slgr_cython/example_&lt;some_example&gt;.py</p>
<p>If you installed from file, the example script can be found at:</p>
<p>examples/example_&lt;some_example&gt;.py</p>
<p>To see the example simply run:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">example_</span><span class="o">&lt;</span><span class="n">some_example</span><span class="o">&gt;.</span><span class="n">py</span>
</pre></div>
</div>
<p>The following sections walk you through the examples using the python interpreter.</p>
<div class="section" id="example-signal">
<h2>1.2.1. example_signal<a class="headerlink" href="#example-signal" title="Permalink to this headline">¶</a></h2>
<p>Open the python interpreter and import the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyslgr.LLSignal</span> <span class="k">import</span> <span class="n">LLSignal</span>
</pre></div>
</div>
<p>To create an instance of LLSignal</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span> <span class="o">=</span> <span class="n">LLSignal</span><span class="p">()</span>
</pre></div>
</div>
<p>We can read the a test signal from file. Pyslgr has a few example signals already built in, we will use one of these.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="o">.</span><span class="n">load_pcm_wav</span><span class="p">(</span><span class="s1">&#39;../slgr_test/test/dlpt-ara-D4m-RZ.wav&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>We will visualize the signal in the time domain. We will calculate and display the first 10 seconds.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">seconds</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sf</span> <span class="o">=</span> <span class="n">sig</span><span class="o">.</span><span class="n">sampling_frequency</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">seconds</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">sf</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="n">sf</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">sig</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time in seconds&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>The signal looks like this:</p>
<img alt="images/quick_start/figure_1.png" class="align-center" src="images/quick_start/figure_1.png" />
<p>To get the pitch of the signal, use <strong>f0_get(min_f0,max_f0,window_dur,frame_step)</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f0</span> <span class="o">=</span> <span class="n">sig</span><span class="o">.</span><span class="n">get_f0</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">650</span><span class="p">,</span><span class="mf">0.010</span><span class="p">,</span><span class="mf">0.005</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f0</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">130</span><span class="p">:</span><span class="mi">135</span><span class="p">]</span>
<span class="go">array([196,29374695, 196.95007324, 193.93437195, 195.29318237, 202.55558777])</span>
</pre></div>
</div>
<p>Signals can be sliced using the same syntax as numpy. For instance, <strong>sig[0:10]</strong> returns the first 10 samples of the signal</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
<p>Using negative indices will give the last n values of the signal</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>returns the last value in sig.</p>
<p>Slices [m:n] where m &gt;= n will return empty arrays. To test this, try</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p>For a slice [m:n] where n &gt; sig.length(), clipping will occur and only m:sig.length() is returned</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="n">sig</span><span class="o">.</span><span class="n">length</span><span class="p">()</span><span class="o">+</span><span class="mi">10</span><span class="p">]</span>
<span class="go">array([72.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="go">72.0</span>
</pre></div>
</div>
<p>Strides and reversals are also possible. <strong>sig[20::3]</strong> returns every 3rd element starting with the 20th element. <strong>sig[10:-2]</strong> returns every second element starting at the 10th element as indices decrease.</p>
<p>Using slices, we can plot portions of the signal. Here we look at 5 seconds of the signal from 3 seconds to 8 seconds.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">min_seconds</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">max_seconds</span> <span class="o">=</span> <span class="mi">8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">min_seconds</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">sf</span><span class="p">),</span> <span class="n">max_seconds</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">sf</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="n">sf</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">sig</span><span class="p">[</span><span class="n">min_seconds</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">sf</span><span class="p">):</span><span class="n">max_seconds</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">sf</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time in seconds&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="images/quick_start/figure_2.png" class="align-center" src="images/quick_start/figure_2.png" />
<p>To check the frequency at which the signal was sampled, use the following</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="o">.</span><span class="n">sampling_frequency</span><span class="p">()</span>
<span class="go">16000.0</span>
</pre></div>
</div>
<p>We can downsample by resampling</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="o">.</span><span class="n">resample_8k</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="o">.</span><span class="n">sampling_frequency</span><span class="p">()</span>
<span class="go">8000.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="o">.</span><span class="n">save_pcm_wav</span><span class="p">(</span><span class="o">&lt;</span><span class="n">filename</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>There also several options for pre-processing the data, including mean removal, amplitude normalization, and preemphasis.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="o">.</span><span class="n">remove_mean</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="o">.</span><span class="n">preemphasize</span><span class="p">(</span><span class="mf">0.97</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="example-mfcc">
<span id="id1"></span><h2>1.2.2. example_mfcc<a class="headerlink" href="#example-mfcc" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We will use the LLSignal class in this example. To familiarize yourself with this class, please see <a class="reference internal" href="#example-signal">example_signal</a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">MFCCFeatures extends LLFeatures</p>
</div>
<p>To begin we will want to import the relevent modules:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyslgr.LLSignal</span> <span class="k">import</span> <span class="n">LLSignal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyslgr.MFCCFeatures</span> <span class="k">import</span> <span class="n">MFCCFeatures</span>
</pre></div>
</div>
<p>Processing the signal in order to obtain  mel-frequency cepstral coefficient (MFCC) features, requires a config file (in json format). We will load in the default feature config file and make modifications. Then we will restore it for use.</p>
<p>We begin by loading the config file.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../config/lid_config.json&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>For the purpose of this example we will set <strong>fb_only</strong> to true. To see all the config options, see <a class="reference internal" href="pyslgr.html#pyslgr.MFCCFeatures.MFCCFeatures.process" title="pyslgr.MFCCFeatures.MFCCFeatures.process"><code class="xref py py-meth docutils literal"><span class="pre">process()</span></code></a> <strong>fb_only</strong> produces the &#8216;raw&#8217; filter bank outputs instead of producing cepstral coefficients.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">feat_config</span> <span class="o">=</span> <span class="n">c</span><span class="p">[</span><span class="s1">&#39;lid_config&#39;</span><span class="p">][</span><span class="s1">&#39;feat_config&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feat_config</span><span class="p">[</span><span class="s1">&#39;fb_only&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span>
</pre></div>
</div>
<p>Now we save this a new config file.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mfcc_config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">feat_config</span><span class="p">)</span>
</pre></div>
</div>
<p>To check whether our change took effect,</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="s1">&#39;MFCC features configuration: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mfcc_config</span><span class="p">)</span>
<span class="go">MFCC features configuration: {&quot;fb_only&quot;: &quot;true&quot;, &quot;fb_hi&quot;: &quot;3140&quot;, &quot;win_inc_ms&quot;: &quot;10&quot;, &quot;linear&quot;: &quot;false&quot;, &quot;feat_type&quot;: &quot;mfcc&quot;, &quot;fb_low&quot;: &quot;300&quot;, &quot;win_len_ms&quot;: &quot;20&quot;, &quot;alpha&quot;: &quot;1&quot;, &quot;num_cep&quot;: &quot;6&quot;, &quot;keep_c0&quot;: &quot;true&quot;, &quot;dither&quot;: &quot;1&quot;}</span>
</pre></div>
</div>
<p>And, indeed <strong>fb_only</strong> has been set to true. We can also review the other configuration settings.</p>
<p>We now load in the sample signal just as in <cite>example_signal</cite>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span> <span class="o">=</span> <span class="s1">&#39;../slgr_test/test/dlpt-ara-D4m-RZ.wav&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span> <span class="o">=</span> <span class="n">LLSignal</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="o">.</span><span class="n">load_pcm_wav</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
</pre></div>
</div>
<p>To get features, we make an instance of the MFCCFeatures class and call <a class="reference internal" href="pyslgr.html#pyslgr.MFCCFeatures.MFCCFeatures.process" title="pyslgr.MFCCFeatures.MFCCFeatures.process"><code class="xref py py-meth docutils literal"><span class="pre">process()</span></code></a></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">feats</span> <span class="o">=</span> <span class="n">MFCCFeatures</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feats</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">mfcc_config</span><span class="p">)</span>
</pre></div>
</div>
<p>To get features...</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">feats</span> <span class="o">=</span> <span class="n">MFCCFeatures</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feats</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">mfcc_config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feats</span><span class="o">.</span><span class="n">delta</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feats</span><span class="o">.</span><span class="n">accel</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="MFCC_Features.html#mfcc-features-delta"><span class="std std-ref">MFCC Features</span></a> for more information on the delta() and accel().</p>
<p>You can also try out the various slicing and indexing operations.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Single vectors are printed to console as a list of entries read from left to right. Multiple vectorss are printed to console as columns, each column represents a vector.</p>
</div>
<p>Here are some examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">feats</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>     <span class="c1">#gets the first vector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feats</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>    <span class="c1">#gets the last vector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feats</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>   <span class="c1">#gets vectors 0 through 3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feats</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1">#gets third to last vector through last vector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feats</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="c1">#gets vectors 0,2,4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feats</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>   <span class="c1">#produces an empty array</span>
</pre></div>
</div>
</div>
<div class="section" id="example-lid-gmm">
<h2>1.2.3. example_lid_gmm<a class="headerlink" href="#example-lid-gmm" title="Permalink to this headline">¶</a></h2>
<p>To begin this example, we will want to import all the relevant modules</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyslgr.LLSignal</span> <span class="k">import</span> <span class="n">LLSignal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyslgr.MFCCFeatures</span> <span class="k">import</span> <span class="n">MFCCFeatures</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyslgr.GMMModel</span> <span class="k">import</span> <span class="n">GMMModel</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">operator</span>
</pre></div>
</div>
<p>Now we would like to load our example signal.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span> <span class="o">=</span> <span class="n">LLSignal</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="o">.</span><span class="n">load_pcm_wav</span><span class="p">(</span><span class="s1">&#39;../slgr_test/test/dlpt-ara-D4m-RZ.wav&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>As in example_mfcc, we need to set up the config file for our MFCC features.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">slgr_config_fn</span> <span class="o">=</span> <span class="s1">&#39;../config/lid_config.json&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">slgr_config_fn</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mfcc_config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;lid_config&#39;</span><span class="p">][</span><span class="s1">&#39;feat_config&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>For this example, we will also need models. These models can be found in the /nmec/slgr/model directory</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model_dir</span> <span class="o">=</span> <span class="s1">&#39;../model&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_names</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;lid_config&#39;</span><span class="p">][</span><span class="s1">&#39;models&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</pre></div>
</div>
<p>We initialize the MFCC features as in example_mfcc. For more details on how to use the set_outfeat function, see .</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">feat</span> <span class="o">=</span> <span class="n">MFCCFeatures</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feat</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">mfcc_config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feat</span><span class="o">.</span><span class="n">rasta</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feat</span><span class="o">.</span><span class="n">delta2point</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feat</span><span class="o">.</span><span class="n">sdc</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feat</span><span class="o">.</span><span class="n">xtalk</span><span class="p">(</span><span class="o">-</span><span class="mf">10.0</span><span class="p">,</span><span class="mf">5.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feat</span><span class="o">.</span><span class="n">apply_sad</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feat</span><span class="o">.</span><span class="n">feat_norm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feat</span><span class="o">.</span><span class="n">set_outfeat</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we will create the GMM model object.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g_ubm</span> <span class="o">=</span> <span class="n">GMMModel</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g_ubm</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">model_dir</span><span class="p">,</span><span class="s2">&quot;language&quot;</span><span class="p">,</span> <span class="s2">&quot;sbkg.o1024-sdc-rasta-fn-fnap.mod&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>To get models for all available languages.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g_langs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">model_names</span><span class="p">)):</span>
<span class="go">      g_langs.append(GMMModel())</span>
<span class="go">      g_langs[i].load(os.path.join(model_dir, model_names[i]))</span>
</pre></div>
</div>
<p>To get the scores:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">allScores</span> <span class="o">=</span> <span class="n">g_ubm</span><span class="o">.</span><span class="n">score_models</span><span class="p">(</span><span class="n">feat</span><span class="p">,</span> <span class="n">g_langs</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">modelScores</span> <span class="o">=</span> <span class="n">allScores</span><span class="o">.</span><span class="n">scores</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scores_out</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">modelScores</span><span class="o">.</span><span class="n">size</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span>
<span class="go">    scores_out.append((model_names[i], modelScores[i+1]-modelScores[i]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scores_out</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">scores_out</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="s1">&#39;scores: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">scores_out</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="s2">&quot;UBM score =&quot;</span><span class="p">,</span> <span class="n">allScores</span><span class="o">.</span><span class="n">ubm_score</span>
<span class="go">UBM score = -71.553314209</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer">
        &copy; 2016, Esther Wolf.
      <a href="_sources/quick_start.txt" rel="nofollow">Show this page source</a>
    </div>
     <div class="rel">
    
    <div class="buttonPrevious">
      <a href="install.html">Previous
      </a>
    </div>
    <div class="buttonNext">
      <a href="MFCC_Features.html">Next
      </a>
    </div>
    <div class="buttonPrevious">
      <a href="py-modindex.html">Previous
      </a>
    </div>
    
     </div>

    
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-22606712-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    
  </body>
</html>